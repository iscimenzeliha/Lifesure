@model Proje7MVC.Models.ViewModels.LinkedinViewModel
@using Proje7MVC.App_GlobalResources

<!-- Topbar Start -->
<div class="container-fluid topbar px-0 px-lg-4 bg-light py-2 d-none d-lg-block">
    <div class="container">
        <div class="row gx-0 align-items-center">
            <div class="col-lg-8 text-center text-lg-start mb-lg-0">
                <div class="d-flex flex-wrap">
                    <div class="border-end border-primary pe-3">
                        <a href="#" class="text-muted small">
                            <i class="fas fa-map-marker-alt text-primary me-2"></i>@Resources.Site.Location
                        </a>
                    </div>
                    <div class="ps-3">
                        <a href="mailto:lifesureinsurance@gmail.com" class="text-muted small">
                            <i class="fas fa-envelope text-primary me-2"></i>lifesureinsurance@gmail.com
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center text-lg-end">
                <div class="d-flex justify-content-end align-items-center">
                    <!-- LinkedIn Takipçi -->
                    <div class="social-hover me-3">
                        <a href="#" id="linkedinIcon" class="text-dark">
                            <i class="fab fa-linkedin fa-lg"></i> <span id="linkedin-followers">Yükleniyor...</span>
                        </a>
                        <div id="linkedinCard" class="hover-card" style="display:none;">
                            <div class="company-card">
                                <div class="logo-container">
                                    <img src="/LifeSure-1.0.0/lifesure_group_ltd_logo.jpeg" alt="LinkedIn Logo" />
                                </div>
                                <div class="company-info">
                                    <h3>Lifesure Group Ltd</h3>
                                    <p>LinkedIn Takipçi Sayısı: <span id="linkedin-followers-card">Yükleniyor...</span></p>
                                    <p class="description">Profesyonel hizmetler ve sigorta çözümleri.</p>
                                    <a href="https://www.linkedin.com/company/lifesure-group-ltd" target="_blank">LinkedIn Sayfası</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dil Seçimi -->
                    <div class="dropdown ms-3">
                        <a href="#" class="dropdown-toggle text-dark" data-bs-toggle="dropdown">
                            <small><i class="fas fa-globe-europe text-primary me-2"></i>@Resources.Site.Language</small>
                        </a>
                        <div class="dropdown-menu rounded">
                            <a href="@Url.Action("ChangeLanguage", "Language", new { lang = "tr", returnUrl = Request.RawUrl })" class="dropdown-item">Türkçe</a>
                            <a href="@Url.Action("ChangeLanguage", "Language", new { lang = "en", returnUrl = Request.RawUrl })" class="dropdown-item">English</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Topbar End -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(function () {
        // LinkedIn takipçi sayısını Ajax ile çek
        $.get('@Url.Action("GetLinkedinFollowers", "Social")', function (data) {
            $('#linkedin-followers').text(data + " takipçi");
            $('#linkedin-followers-card').text(data + " takipçi");
        }).fail(function () {
            $('#linkedin-followers').text("Takipçi yüklenemedi");
            $('#linkedin-followers-card').text("Takipçi yüklenemedi");
        });

        // Hover kart aç/kapa
        $('#linkedinIcon').click(function (e) {
            e.preventDefault();
            $('#linkedinCard').toggle();
        });

        // Sayfa içinde başka yere tıklandığında kapat
        $(document).click(function (e) {
            if (!$(e.target).closest('#linkedinIcon, #linkedinCard').length) {
                $('#linkedinCard').hide();
            }
        });
    });
</script>

<style>
    .hover-card {
        position: absolute;
        top: 40px;
        left: 50%;
        transform: translateX(-50%);
        width: 620px;
        z-index: 999;
        text-align: left;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        padding: 20px;
    }

    .company-card {
        display: flex;
        gap: 20px;
        max-width: 600px;
        margin: 0 auto;
    }

    .logo-container {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        overflow: hidden;
        border: 3px solid #0077b5;
    }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

    .company-info h3 {
        color: #0077b5;
        margin-bottom: 8px;
    }

    .company-info p {
        margin: 4px 0;
        font-size: 0.95rem;
    }

    .company-info a {
        color: #0077b5;
        text-decoration: none;
    }

        .company-info a:hover {
            text-decoration: underline;
        }

    .description {
        font-style: italic;
        color: #555;
    }
</style>
